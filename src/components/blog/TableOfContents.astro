---
import type { MarkdownHeading } from 'astro';

interface Props {
  headings: MarkdownHeading[];
}

const { headings } = Astro.props;
const filteredHeadings = headings.filter((h) => h.depth >= 2 && h.depth <= 3);
---

{
  filteredHeadings.length > 0 && (
    <nav class="rounded-xl border border-slate-200 bg-white p-5 dark:border-slate-800 dark:bg-slate-900" aria-label="Table of contents">
      <h2 class="mb-3 text-sm font-semibold uppercase tracking-wide text-slate-900 dark:text-white">
        On this page
      </h2>
      <ul class="space-y-2 text-sm">
        {filteredHeadings.map((heading) => (
          <li class:list={[heading.depth === 3 && 'ml-4']}>
            <a
              href={`#${heading.slug}`}
              class="text-slate-600 transition-colors hover:text-primary-600 dark:text-slate-400 dark:hover:text-primary-400"
            >
              {heading.text}
            </a>
          </li>
        ))}
      </ul>
    </nav>
  )
}
